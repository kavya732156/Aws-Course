***Amazon EC2 Auto Scaling automatically:***<br>
. Launches new instances when load increases<br>
. Terminates instances when load decreases<br>
. Replaces unhealthy instances<br>
. Without Auto Scaling: Traffic spike → Server crash and Low traffic → Wasted money <br>
. With Auto Scaling: Scale Out → Add instances  and Scale In → Remove instances<br>

***Components of Auto Scaling***<br>
***1. Launch Configuration / Launch Template***– Defines instance settings (AMI, instance type, key pair, security groups, etc.).<br>
***2. Auto Scaling Group (ASG)*** – A collection of EC2 instances with scaling rules.<br>
***3. Scaling Policies***– Define when and how the ASG scales.<br>
***4. Target Tracking*** – Maintains a target metric (e.g., CPU utilization at 50%).<br>
<br>a. Step Scaling – Adds/removes instances based on predefined step values.
<br>b. Simple Scaling – Adds/removes instances based on CloudWatch alarms.
<br>c. Scheduled Scaling – Scales at specific times.

***Key Features***<br>
1. ***Dynamic Scaling*** – Adjusts capacity based on real-time traffic.<br>
2. ***Predictive Scaling*** – Uses machine learning to forecast demand.<br>
3. ***Scheduled Scaling*** – Scales resources at predefined times.<br>
4. ***Multi-resource Scaling*** – Works with EC2, ECS, DynamoDB, Aurora, etc.<br>
5. ***Health Checks & Self-healing*** – Replaces unhealthy instances automatically.<br>
6. ***Cost Optimization*** – Prevents over-provisioning and reduces waste.<br>
7. ***Integration with AWS Services*** – Works with CloudWatch, ELB, IAM, etc.<br>

***Exercise***<br>
***1. Create Launch Template in AWS Console***
```
Go to EC2 Dashboard Click Launch Templates and Click Create launch template
Launch template name: ASG-Web-Template
AMI: Amazon Linux 2, Instance type: t2.micro, Key pair: Select your key
Security Group: Allow HTTP (80), Allow SSH (22) from your IP

Advanced Details → User Data

#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd

TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
AZ=`curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/meta-data/placement/availability-zone`

cat > /var/www/html/index.html <<EOF
<html>
<body style="background-color:#6495ED;color:white;font-size:36px;display:flex;justify-content:center;align-items:center;height:100vh;">
This instance is located in Availability Zone: $AZ
</body>
</html>
EOF

chkconfig httpd on

Click Create Launch Template
```
<img width="1550" height="352" alt="image" src="https://github.com/user-attachments/assets/e6fb415f-790c-4db6-8813-0bf4f9a93361" />

***2. Create Auto Scaling Group (ASG)***
```
Go to Auto Scaling Groups
Click Create Auto Scaling Group
Select your launch template
Network Settings : Choose VPC and Select at least 2 subnets (different AZs)
Attach to Load Balancer : Select:Attach to existing  Choose : Application Load Balancer
Select your Target Group.Group Size : Desired: 2: Min: 1 and Max: 4
```
<img width="1910" height="506" alt="image" src="https://github.com/user-attachments/assets/a38b5a0d-5ea0-4418-ba7f-bfa5422cff19" />

***3. Test***
```
After instances launch:
Copy ALB DNS name and Open in browser 
Refresh multiple times and You should see: This instance is located in Availability Zone: ap-south-1a
```
<img width="1687" height="681" alt="image" src="https://github.com/user-attachments/assets/a632b892-5a91-4ccd-8185-49712f2f73b7" />
<img width="1381" height="357" alt="image" src="https://github.com/user-attachments/assets/527063d8-05e9-4f77-baad-ad8703d92dbe" />

***That confirms:***<br>
Launch Template working, User Data executed, Multi-AZ working and Load Balancer working<br>

***EC2- Auto Scaling Policies***<br>
In Amazon Web Services, Auto Scaling Policies define when and how yourAmazon EC2 Auto Scaling group should scale in or scale out.<br>
They use CloudWatch metrics to automatically adjust the number of EC2 instances.<br>

***1. Target Tracking Scaling Policy*** : Automatically maintains a target metric value.<br>
Steps : <br>
1. Choose a Metric – Select a predefined metric like CPU utilization, request count, or a custom CloudWatch metric.<br>
2. Set a Target Value – Define the desired value (e.g., maintain CPU at 50%).<br>
3. Auto Scaling Adjusts Capacity – AWS increases or decreases instances to keep the metric close to the target.<br>
4. Example: If CPU utilization exceeds 50%, Auto Scaling adds instances. If it drops below 50%, it removes instances.<br>


***2. Step Scaling Policy*** : Scales based on different threshold ranges.
```| CPU Utilization | Action          |
| --------------- | --------------- |
| > 60%           | Add 1 instance  |
| > 75%           | Add 2 instances |
| > 90%           | Add 3 instances |
```
Steps<br>
Steps:
1. Create a CloudWatch Alarm – Define a metric and set threshold values (e.g., CPU > 70%).<br>
2. Define Scaling Steps – Specify actions based on how much the metric deviates.<br>
   . Example: If CPU > 70% for 5 minutes → Add 2 instances. and If CPU < 30% for 5 minutes → Remove 1 instance.<br>
3. Auto Scaling Takes Actions – Based on the metric deviation, instances are added or removed in steps.<br>
4. Best for – Gradual scaling when workload fluctuates in different levels.<br>

***3. Simple Scaling Policy (Legacy)***: This policy adds or removes a fixed number of instances when an alarm is triggered. <br>
Steps:<br>
1. Create a CloudWatch Alarm – Set a metric (e.g., CPU > 70%).<br>
2. Define Scaling Action – Specify how many instances to add or remove.<br>
   . Example: If CPU > 70%, add 1 instance.<br>
3. Cooldown Period – After scaling, Auto Scaling waits before executing another action to prevent rapid fluctuations.<br>
4. Best for – Basic scaling needs where you add/remove instances based on a single threshold.<br>

***4. Scheduled Scaling**** <br>: Scales at specific time.<br>
. Example: Increase instances at 9 AM and Reduce at 10 PM<br>
. Useful for: Office-hour applications and Known traffic patterns<br>

***5. Predictive Scaling*** : Uses machine learning to predict traffic.<br>
. Analyzes historical data<br>
. Pre-scales before traffic spike<br>
. Used in: E-commerce and Seasonal workloads<br>

```
| Scenario                    | Best Policy        |
| --------------------------- | ------------------ |
| Simple production app       | Target Tracking    |
| High sudden traffic         | Step Scaling       |
| Predictable daily usage     | Scheduled Scaling  |
| Seasonal / recurring spikes | Predictive Scaling |
```
