***AMI (Amazon Machine Images )***

***What is an AMI?***
An AMI (Amazon Machine Image) is a template that contains a pre-configured operating system, application server, 
and applications to launch EC2 instances.

***Key Points:***

Includes: OS, software, application configurations, permissions.
Allows launching multiple identical EC2 instances.
Each AMI has a unique ID (AMI ID).
By default we see amazon managed AMIs
In realworld we use custom AMIs
Common usecases of using custom images is
  AD Integration
  Security Vulnarability Scaninhg
  Logging agent
  Monitoring Agent

***Creating custom AMIs - Demo***
1. Launch EC2 using existing AMIs
2. Install the softwares you want and configurations you need.
3. Create Image (Template) form the above ec2 instance.
4. Terminate the instance after creating template

***Golden AMIs (Imp)***
Golden AMI’s are templates which contains following
  1. Recent security patches
  2. Logging agents
  3. Monitoring agents

***AMI Permissions***
  1. AMIs are private by default
  2. AMIs can be shared with cross AWS accounts
  3. AMIs can be public too
  4. AMIs can be copied to cross region.
Note: AMIs are regional

***EC2 Instance Purchase Options or (FAQ) How do you optimize EC2 instances' cost?*** 
1. ***On-Demand Instances*** :
   These instances are flexible to use, that is you get it when you want it and terminate it when you don't want it.
   When compared with other purchase options this is costlier
   Pay per second/minute. No commitment.
   Best for:
     Short-term workloads
     Dev/Test environments
     Unpredictable traffic
     Proof of concepts
   Example : Flipkart wants 20 additional servers only for a big billion day.
   
2. ***Reserved Instances (RI)***
   Commit for 1 or 3 years → heavy discount
   Use this only when you need it for a minimum 1 year.
   After buying reserved instance AWS will not take it back
   You can sell it in marketplace

   ***Types:***
   |Type    |        |Discount	|        |Can change instance type?|
   |:--------|:------------------:|-----------------------------------:|
   |Standard RI	     |Up to 72%	        |❌ No|
   |Convertible RI	  |Up to 54%	       | ✅ Yes|
   |Scheduled RI	     |❌ Deprecated    	|❌|

   ***Billing***
   our bill is fixed
   Long term commitment with 1 or 3 years
   Upfront payment (fixed , partial)
   75% discount on hourly price

4. ***Dedicated Hosts***
   We should use dedicated hosts when we want to bring your own license to cloud
   Physical server only for you
   Best for:
     License-bound software (Oracle, Windows Server licenses)
     Compliance / Regulatory needs
     Bring Your Own License (BYOL)
   Cost: Very expensive
5. ***Spot Instances***
   Use unused AWS capacity (up to 90% cheaper)
   Best for:
     Batch jobs
     Big data processing
     CI/CD pipelines
     Video rendering
     Machine learning training
  ***Spot Interruption***: AWS can terminate your instance with 2 minutes notice

***Quick Interview Comparison Table***

 ***Use Case	               Best Option***
Dev/Test	                  On-Demand
Always-on Prod	            Reserved / Savings Plan
Batch Jobs	                Spot
License Based Software	    Dedicated Host
Compliance	                Dedicated Instance / Host
High Traffic Event	        Capacity Reservation
Auto Scaling	              Savings Plan + Spot Mix

***imp qns***
Cheapest EC2 option? Spot Instances
Best for steady workloads? Reserved Instances
Which gives guaranteed capacity? Capacity Reservations
Which supports BYOL? Dedicated Hosts
Frontend EC2 → On-Demand  
Backend EC2 → Savings Plan  
Batch Jobs → Spot Instances  
DR Capacity → Capacity Reservation  
License DB → Dedicated Host 

***EC2 Instance Types & Families***
Amazon offers wide range of instance types and choosing them correctly helps in optimizing application performance
1. ***General Purpose instances: M / T / A***
  Use this for non mission critical applications
  It offers equal ration of memory, cpu and network performances
  Use it for 
    Dev and test environments 
    For small and medium databases 
    For web applications
    Virtual desktops and Etc.
 ***M – Balanced (CPU + Memory)***
   Use cases:Web servers. Application servers, Microservices and API backends
   Examples: m6i, m7g
***T – Burstable (Low cost)***
  Use cases:Dev/Test, Small websites and Low-traffic apps
  Examples: t3, t4g
***A – AMD (Cheaper than Intel)***
  Use cases: Cost-optimized workloads and App servers
  Examples: m6a, c6a, r6a
3. ***Compute Optimized Instances : (C)***
  It offers highest ratio of CPU
  Use this for applications whose dominant performance attribute is CPU.
  exapmle: c6i, c7g
5. ***Memory Optimized Instances R / X / Z***
  If offers highest ration of memory (RAM)
  Use it for memory intensive workloads (applications)
  Example use cases are
    SAP Hana (in-memory database)
    Cache server
  ***R – High RAM***
  Use cases:In-memory caches (Redis, Memcached), SAP HANA and Big data analytics
  Examples: r6i, r7g
  ***X – Extreme Memory***
  Use cases: Large in-memory DBs and Enterprise analytics
  Examples: x2idn, x2iedn
 ***Z – High clock speed***
 Use cases:EDA tools and Financial trading apps and Latency-sensitive workloads
 Examples:z1d
7. ***Storage Optimized Instances***
  Use it for applications that requires better IOPS (Input and output operations Per second).
  Databases typically write and read data to and from disk; these operations must be quick.
  You can use this to set up of data warehouses,
8. ***GPU***
    For video gaming
    For video and audio encoding.

***imp qns***
Frontend → t4g  
Backend APIs → m6i  
Redis Cache → r6i  
Batch Jobs → c6i  
Search (Elastic) → i4i  
ML Inference → inf2  
